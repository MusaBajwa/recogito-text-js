!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Recogito",[],e):"object"==typeof exports?exports.Recogito=e():t.Recogito=e()}(window,(function(){return function(t){function e(e){for(var o,a,c=e[0],u=e[1],l=e[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(s&&s(e);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var u=n[c];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={0:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window.webpackJsonpRecogito=window.webpackJsonpRecogito||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var s=u;return i.push([46,1]),n()}({42:function(t,e,n){var o=n(43);"string"==typeof o&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};n(45)(o,r);o.locals&&(t.exports=o.locals)},43:function(t,e,n){(t.exports=n(44)(!1)).push([t.i,".r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle}.r6o-btn .icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2 !important;background-color:#a3c2e2 !important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.annotation{background-color:#ffa50033;border-bottom:2px solid orange;cursor:pointer}.selection{background-color:#cfcfffa1;cursor:pointer}.r6o-section.r6o-textentry{background-color:#f5f7f7}.r6o-section.r6o-textentry .r6o-editable-text{padding:8px 10px;max-height:120px;overflow:auto;outline:none;min-height:3em;font-size:14px}.r6o-section.r6o-textentry .r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;margin-top:14px;margin-left:-8px;width:400px}.r6o-editor .arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px}.r6o-editor .arrow:after{content:'';position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,0.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,0.4);box-shadow:2px 2px 42px rgba(0,0,0,0.4)}.r6o-editor .inner .r6o-section:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .inner .r6o-section{border-bottom:1px solid #e5e5e5}.r6o-editor .footer{text-align:right;padding:8px 0}.r6o-editor .footer .r6o-btn{margin-right:8px}.r6o-editor.align-right{margin-left:8px}.r6o-editor.align-right .arrow{left:auto;right:12px}.r6o-editor.align-bottom{margin-bottom:14px}.r6o-editor.align-bottom .arrow{top:auto;bottom:-12px}.r6o-editor.align-bottom .arrow::after{top:-11px;box-shadow:none}\n",""])},46:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),i=n(3),a=n.n(i),c=n(13),u=n.n(c);function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var n,o,r,i,a,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=p(e).call(this,t),n=!r||"object"!==s(r)&&"function"!=typeof r?d(o):r,i=d(n),c=function(t){return n._annotation.target.selector.find((function(e){return e.type===t}))},(a="_getSelector")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,t),n=e,(o=[{key:"clone",value:function(){return new e(Object.assign({},this._annotation))}},{key:"quote",get:function(){return this._quote=this._quote||this._getSelector("TextQuoteSelector").exact}},{key:"start",get:function(){return this._start=this._start||this._getSelector("TextPositionSelector").start}},{key:"end",get:function(){return this._end=this._end||this._getSelector("TextPositionSelector").end}}])&&f(n.prototype,o),r&&f(n,r),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._annotation=e}var e,n,o;return e=t,(n=[{key:"clone",value:function(){return new t(Object.assign({},this._annotation))}},{key:"id",get:function(){return this._annotation.id}},{key:"bodies",get:function(){return this._annotation.body},set:function(t){this._annotation.body=t}},{key:"target",get:function(){return this._annotation.target}}])&&l(e.prototype,n),o&&l(e,o),t}());function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function t(e,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"init",(function(t){Array.prototype.slice.call(o.el.childNodes).reduce((function(t,e){var n=t.length>0?t[t.length-1].start:0,o={node:e,start:n,end:n+e.textContent.length};return[].concat(g(t),[o])}),[]);t.forEach((function(t){return o._addAnnotation(t)}))})),m(this,"_addAnnotation",(function(t){var e=y(o.charOffsetsToDOMPosition([t.start,t.end]),2),n=e[0],r=e[1],i=document.createRange();i.setStart(n.node,n.offset),i.setEnd(r.node,r.offset);var a=o.wrapRange(i);o.applyStyles(t,a),o.bindAnnotation(t,a)})),m(this,"addOrUpdateAnnotation",(function(t,e){var n=document.querySelectorAll(".annotation"),r=e?Array.prototype.slice.call(n).filter((function(t){return t.annotation===e})):[];r.length>0?r.forEach((function(e){return e.annotation=t})):o._addAnnotation(t)})),m(this,"applyStyles",(function(t,e){e.forEach((function(t){return t.className="annotation"}))})),m(this,"bindAnnotation",(function(t,e){e.forEach((function(e){e.annotation=t,t.id&&(e.dataset.id=t.id)}))})),m(this,"walkTextNodes",(function(t,e,n){var r,i=n||[],a=!0;if((r=0,i.forEach((function(t){r+=t.textContent.length})),r)>e)return!1;for(3===t.nodeType&&i.push(t),t=t.firstChild;t&&a;)a=o.walkTextNodes(t,e,i),t=t.nextSibling;return i})),m(this,"charOffsetsToDOMPosition",(function(t){var e,n=Math.max.apply(null,t),r=(e=0,o.walkTextNodes(o.el,n).map((function(t){var n=t.textContent.length,o={node:t,start:e,end:e+n};return e+=n,o})));return o.calculateDomPositionWithin(r,t)})),m(this,"textNodesBetween",(function(t,e,n){var r,i,a,c=((a=document.createRange()).setStart(n,0),a.setEnd(e,e.textContent.length),a.toString().length),u=o.walkTextNodes(n,c),l=[],s=u.length,f=!1;for(i=0;i<s;i++)(r=u[i])===e&&(f=!1),f&&l.push(r),r===t&&(f=!0);return l})),m(this,"calculateDomPositionWithin",(function(t,e){var n=[];return t.forEach((function(t,o){return e.forEach((function(e,o){e>=t.start&&e<=t.end&&((n.length>0&&n[n.length-1].charOffset)!==e&&n.push({charOffset:e,node:t.node,offset:e-t.start}))})),n.length<e.length})),n})),m(this,"wrapRange",(function(t,e){var n=e||o.el,r=function(t){var e=document.createElement("SPAN");return t.surroundContents(e),e};if(t.startContainer===t.endContainer)return[r(t)];var i=o.textNodesBetween(t.startContainer,t.endContainer,n),a=document.createRange();a.selectNodeContents(t.startContainer),a.setStart(t.startContainer,t.startOffset);var c=r(a),u=document.createRange();u.selectNode(t.endContainer),u.setEnd(t.endContainer,t.endOffset);var l=r(u),s=i.reverse().map((function(t){var e=document.createElement("SPAN");return t.parentNode.insertBefore(e,t),e.appendChild(t),e}));return[c].concat(s,[l])})),m(this,"getAnnotationsAt",(function(t){return function(t){return t.sort((function(t,e){return new h(t).quote.length-new h(e).quote.length}))}(function t(e,n){var o=n||[],r=e.parentNode;return o.push(e.annotation),r.classList.contains("annotation")?t(r,o):o}(t))})),this.el=e,this.styleRules=n},v=function(t){for(var e=t.toString(),n=0,o=0;" "===e.substring(0,1);)n+=1,e=e.substring(1);for(;" "===e.substring(e.length-1);)o+=1,e=e.substring(0,e.length-1);return n>0&&t.setStart(t.startContainer,t.startOffset+n),o>0&&t.setEnd(t.endContainer,t.endOffset-o),t},x=function(t,e){var n=document.createRange();n.setStart(e,0),n.setEnd(t.startContainer,t.startOffset);var o=t.toString(),r=n.toString().length;return new h({"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",body:[{type:"TextualBody"}],target:{selector:[{type:"TextQuoteSelector",exact:o},{type:"TextPositionSelector",start:r,end:r+o.length}]}})},O=n(14);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=function(t){function e(t,n){var o,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=_(e).call(this),o=!i||"object"!==S(i)&&"function"!=typeof i?j(r):i,k(j(o),"_onMouseDown",(function(t){o.clearSelection()})),k(j(o),"_onMouseUp",(function(t){var e=getSelection();if(e.isCollapsed){var n=t.target.closest(".annotation");n?o.emit("select",{selection:o.highlighter.getAnnotationsAt(n)[0],clientRect:n.getBoundingClientRect()}):o.emit("select",{})}else{var r=v(e.getRangeAt(0)),i=x(r,o.el),a=r.getBoundingClientRect();o.highlighter.wrapRange(r).forEach((function(t){return t.className="selection"})),o._clearNativeSelection(),o.emit("select",{selection:i,clientRect:a})}})),k(j(o),"_clearNativeSelection",(function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()})),k(j(o),"clearSelection",(function(){o._currentSelection=null;var t=Array.prototype.slice.call(o.el.querySelectorAll(".selection"));t&&t.forEach((function(t){var e=t.parentNode;e.insertBefore(document.createTextNode(t.textContent),t),e.removeChild(t)})),o.el.normalize()})),o.el=t,o.highlighter=n,t.addEventListener("mousedown",o._onMouseDown),t.addEventListener("mouseup",o._onMouseUp),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,t),e}(n.n(O).a),C=n(15),A=n(17),T=n.n(A),R=function(t){return r.a.createElement("div",{className:"r6o-section r6o-textentry"},r.a.createElement(T.a,{className:"r6o-editable-text",spellCheck:!1,"data-placeholder":"Add a comment...",html:t.content||"",onKeyPress:function(e){13===e.which&&e.ctrlKey&&t.onOk()},onChange:t.onChange}))};function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(n,!0).forEach((function(e){Q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V={TextualBody:function(t){function e(){var t,n,o,r,i,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=new Array(u),s=0;s<u;s++)l[s]=arguments[s];return o=this,r=(t=M(e)).call.apply(t,[this].concat(l)),n=!r||"object"!==N(r)&&"function"!=typeof r?D(o):r,i=D(n),c=function(t){return n.props.onChange({type:"TextualBody",value:t.target.value.trim()})},(a="onChange")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){return r.a.createElement(R,{content:this.props.body.value,onChange:this.onChange,onOk:this.props.onOk})}}])&&B(n.prototype,o),i&&B(n,i),e}(o.Component)},X=function(t){function e(t){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=K(e).call(this,t),n=!r||"object"!==U(r)&&"function"!=typeof r?W(o):r,Q(W(n),"_createBodyState",(function(t){return t.annotation?t.annotation.bodies.map((function(t){return{body:t,current:H({},t)}})):[]})),Q(W(n),"onKeydown",(function(t){t.stopPropagation(),27===t.which&&n.props.onCancel()})),Q(W(n),"onSectionChanged",(function(t){return function(e){var o={body:n.state.sections[t].body,current:e};n.setState({sections:Object.assign([],n.state.sections,Q({},t,o))})}})),Q(W(n),"onOk",(function(){var t=n.props.annotation.clone();t.bodies=n.state.sections.map((function(t){return t.current})),n.props.onUpdateAnnotation(t,n.props.annotation)})),Q(W(n),"setPosition",(function(t){if(!t){var e=n.props.bounds,o=e.x,r=e.y,i=e.height;return{left:o+window.scrollX,top:r+i+window.scrollY}}t.right>window.innerWidth&&(n._ref.classList.add("align-right"),n._ref.style.left="".concat(n.props.bounds.right-t.width+window.scrollX,"px")),t.bottom>window.innerHeight&&(n._ref.classList.add("align-bottom"),n._ref.style.top="auto",n._ref.style.bottom="".concat(window.innerHeight-n.props.bounds.top-window.scrollY,"px"))})),Q(W(n),"onVisible",(function(t){t||n.setPosition(n._ref.getBoundingClientRect())})),n.state={sections:n._createBodyState(n.props)},n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,t),n=e,(o=[{key:"componentWillReceiveProps",value:function(t){t.annotation?this.setState({sections:this._createBodyState(t)}):this.setState({sections:[]})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeydown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown,!1)}},{key:"render",value:function(){var t=this;if(this.props.open){var e=this.setPosition(),n=this.props.annotation.bodies.reduce((function(e,n,o){var i=V[n.type],a=r.a.createElement(i,{key:o,body:t.state.sections[o].current,onChange:t.onSectionChanged(o),onOk:t.onOk});return i?[].concat(q(e),[a]):a}),[]);return this.props.open&&r.a.createElement(C.a,{onChange:this.onVisible},r.a.createElement("div",{ref:function(e){return t._ref=e},className:"r6o-editor",style:e},r.a.createElement("div",{className:"arrow"}),r.a.createElement("div",{className:"inner"},r.a.createElement("div",null,n),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{className:"r6o-btn outline",onClick:this.props.onCancel},"Cancel"),r.a.createElement("button",{className:"r6o-btn ",onClick:this.onOk},"Ok")))))}return null}}])&&I(n.prototype,o),i&&I(n,i),e}(o.Component);n(42);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et=function(t){function e(){var t,n,o,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=this,r=(t=G(e)).call.apply(t,[this].concat(a)),n=!r||"object"!==Y(r)&&"function"!=typeof r?Z(o):r,tt(Z(n),"state",{showEditor:!1,selectionBounds:null,selectedAnnotation:null}),tt(Z(n),"_clearState",(function(){n.setState({showEditor:!1,selectionBounds:null,selectedAnnotation:null})})),tt(Z(n),"setAnnotations",(function(t){n.highlighter.init(t)})),tt(Z(n),"closeEditor",(function(){n._clearState(),n.selectionHandler.clearSelection()})),tt(Z(n),"onSelect",(function(t){var e=t.selection,o=t.clientRect;e?n.setState({showEditor:!0,selectionBounds:o,selectedAnnotation:e}):n._clearState()})),tt(Z(n),"onUpdateAnnotation",(function(t,e){n.selectionHandler.clearSelection(),n.highlighter.addOrUpdateAnnotation(t,e),n._clearState()})),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(e,t),n=e,(o=[{key:"componentDidMount",value:function(){this.highlighter=new w(this.props.content),this.selectionHandler=new P(this.props.content,this.highlighter),this.selectionHandler.on("select",this.onSelect)}},{key:"render",value:function(){return r.a.createElement(X,{open:this.state.showEditor,bounds:this.state.selectionBounds,annotation:this.state.selectedAnnotation,onUpdateAnnotation:this.onUpdateAnnotation,onCancel:this.closeEditor})}}])&&F(n.prototype,o),i&&F(n,i),e}(o.Component);function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"init",(function(){return rt}));var ot=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,"on",(function(t,e){})),nt(this,"loadAnnotations",(function(t){return u.a.get(t).then((function(t){var e=t.data.map((function(t){return new h(t)}));n._app.current.setAnnotations(e)}))})),this._app=r.a.createRef();var o=document.getElementById(e.content),i=document.getElementById(e.container);a.a.render(r.a.createElement(et,{ref:this._app,content:o}),i)},rt=function(t){return new ot(t)}}})}));